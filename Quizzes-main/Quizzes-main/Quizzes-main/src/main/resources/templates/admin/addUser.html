<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" th:href="@{/assets/img/apple-icon.png}">
  <link rel="icon" type="image/png" th:href="@{/assets/img/favicon.png}">
  <title>Add User - Quiz App</title>
  <!-- Fonts and icons -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,900" />
  <!-- Nucleo Icons -->
  <link th:href="@{/assets/css/nucleo-icons.css}" rel="stylesheet" />
  <link th:href="@{/assets/css/nucleo-svg.css}" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <!-- CSS Files -->
  <link id="pagestyle" th:href="@{/assets/css/material-dashboard.css?v=3.2.0}" rel="stylesheet" />
  <!-- Custom CSS -->
  <style>
    /* Đảm bảo body và html chiếm toàn bộ chiều cao */
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      position: relative;
    }

    /* Đặt main-content để chiếm toàn bộ chiều cao trừ footer */
    .main-content {
      min-height: calc(100vh - 60px); /* 60px là chiều cao của footer */
      position: relative;
      padding-bottom: 60px;
    }

    /* Cải thiện card */
    .card {
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      background-color: #fff;
      padding: 1.5rem; /* Thêm padding tổng thể */
    }

    .card-header {
      padding-bottom: 0.5rem;
      border-bottom: 1px solid #e9ecef; /* Đường viền nhẹ */
      margin-bottom: 1.5rem;
    }

    .card-header h6 {
      font-size: 1.25rem;
      font-weight: 600;
      color: #344767;
      text-align: center;
      margin: 0;
    }

    /* Cải thiện bố cục form */
    .form-container {
      max-width: 800px; /* Giới hạn chiều rộng form */
      margin: 0 auto; /* Căn giữa form */
    }

    .form-group {
      margin-bottom: 1.5rem;
      position: relative; /* Để căn chỉnh lỗi validation */
    }

    .form-group label {
      font-weight: 500;
      color: #344767;
      margin-bottom: 0.5rem;
      display: block;
    }

    .form-control, .form-select {
      border-radius: 8px;
      border: 1px solid #d2d6da;
      padding: 0.75rem 1rem;
      font-size: 0.875rem;
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      width: 100%; /* Đảm bảo trường nhập liệu chiếm toàn bộ chiều rộng */
    }

    .form-control:focus, .form-select:focus {
      border-color: #344767;
      box-shadow: 0 0 0 3px rgba(52, 71, 103, 0.1);
      outline: none;
    }

    /* Định dạng lỗi validation */
    .text-danger {
      color: #dc3545;
      font-size: 0.75rem;
      margin-top: 0.25rem;
      position: absolute;
      bottom: -1.25rem;
      left: 0;
    }

    /* Thông báo lỗi và thành công */
    .alert {
      border-radius: 8px;
      margin-bottom: 1.5rem;
      padding: 1rem;
      font-size: 0.875rem;
    }

    .alert-danger {
      background-color: #f8d7da;
      color: #721c24;
    }

    .alert-success {
      background-color: #d4edda;
      color: #155724;
    }

    .alert .btn-close {
      padding: 0.5rem;
    }

    /* Căn chỉnh nút Save và Cancel */
    .form-actions {
      display: flex;
      gap: 1rem;
      justify-content: center; /* Căn giữa thay vì căn phải */
      margin-top: 2rem;
    }

    .btn {
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: 500;
      font-size: 0.875rem;
      transition: all 0.3s ease;
    }

    .btn.bg-gradient-dark {
      background: linear-gradient(90deg, #344767, #1f2a44);
      color: #fff;
    }

    .btn.btn-outline-dark {
      border: 1px solid #344767;
      color: #344767;
      background: transparent;
    }

    .btn.bg-gradient-dark:hover {
      background: linear-gradient(90deg, #2a3957, #182135);
    }

    .btn.btn-outline-dark:hover {
      background-color: #f8f9fa;
      color: #344767;
    }

    /* Breadcrumb */
    .breadcrumb-item a {
      font-weight: 500;
      color: #6c757d;
    }

    .breadcrumb-item.active {
      font-weight: 600;
      color: #344767;
    }

    /* Điều chỉnh khoảng cách tổng thể */
    .container-fluid {
      padding: 2rem 3rem; /* Tăng padding cho thoáng hơn */
    }
  </style>
</head>

<body class="g-sidenav-show bg-gray-100">
  <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-radius-lg fixed-start ms-2 bg-white my-2" id="sidenav-main">
    <div class="sidenav-header">
      <a class="navbar-brand px-4 py-3 m-0" th:href="@{/admin/dashboard}">
        <img th:src="@{/assets/img/logo-ct-dark.png}" class="navbar-brand-img" width="26" height="26" alt="main_logo">
        <span class="ms-1 text-sm text-dark">Quiz Admin</span>
      </a>
    </div>
    <hr class="horizontal dark mt-0 mb-2">
    <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link text-dark" th:href="@{/admin/dashboard}">
            <i class="material-symbols-rounded opacity-5">dashboard</i>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link active bg-gradient-dark text-white" th:href="@{/admin/adminUser}">
            <i class="material-symbols-rounded opacity-5">person</i>
            <span class="nav-link-text ms-1">Users</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" th:href="@{/admin/quizzes}">
            <i class="material-symbols-rounded opacity-5">quiz</i>
            <span class="nav-link-text ms-1">Quizzes</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" th:href="@{/admin/categories}">
            <i class="material-symbols-rounded opacity-5">category</i>
            <span class="nav-link-text ms-1">Categories</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" th:href="@{/admin/logout}">
            <i class="material-symbols-rounded opacity-5">logout</i>
            <span class="nav-link-text ms-1">Logout</span>
          </a>
        </li>
      </ul>
    </div>
  </aside>

  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-3 shadow-none border-radius-xl" id="navbarBlur">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="/admin">Admin</a></li>
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="/admin/adminUser">Users</a></li>
            <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Add User</li>
          </ol>
        </nav>
      </div>
    </nav>
    <!-- End Navbar -->

    <div class="container-fluid py-4">
      <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
          <div class="card">
            <div class="card-header pb-0">
              <h6>Add New User</h6>
            </div>
            <div class="card-body">
              <!-- Hiển thị thông báo lỗi nếu có -->
              <div th:if="${error != null}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <span th:text="${error}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
              <!-- Hiển thị thông báo thành công nếu có -->
              <div th:if="${success != null}" class="alert alert-success alert-dismissible fade show" role="alert">
                <span th:text="${success}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>

              <!-- Form thêm người dùng -->
              <form th:action="@{/admin/users/add}" th:object="${user}" method="post" enctype="multipart/form-data" class="form-container">
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="username">Username</label>
                      <input type="text" class="form-control" id="username" th:field="*{username}" required placeholder="Enter username">
                      <div class="text-danger" th:errors="*{username}"></div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="email">Email</label>
                      <input type="email" class="form-control" id="email" th:field="*{email}" required placeholder="Enter email">
                      <div class="text-danger" th:errors="*{email}"></div>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="password">Password</label>
                      <input type="password" class="form-control" id="password" th:field="*{password}" required placeholder="Enter password">
                      <div class="text-danger" th:errors="*{password}"></div>
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label for="role">Role</label>
                      <select class="form-select" id="role" th:field="*{role}" required>
                        <option value="" disabled selected>Select role</option>
                        <option value="ROLE_USER">User</option>
                        <option value="ROLE_ADMIN">Admin</option>
                      </select>
                      <div class="text-danger" th:errors="*{role}"></div>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label for="profileImage">Profile Image</label>
                  <input type="file" class="form-control" id="profileImage" name="profileImage" accept="image/*">
                </div>
                <div class="form-actions">
                  <button type="submit" class="btn bg-gradient-dark">
                    <i class="material-symbols-rounded me-2">save</i> Save
                  </button>
                  <a th:href="@{/admin/adminUser}" class="btn btn-outline-dark">
                    <i class="material-symbols-rounded me-2">cancel</i> Cancel
                  </a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Core JS Files -->
  <script th:src="@{/assets/js/core/popper.min.js}"></script>
  <script th:src="@{/assets/js/core/bootstrap.min.js}"></script>
  <script th:src="@{/assets/js/plugins/perfect-scrollbar.min.js}"></script>
  <script th:src="@{/assets/js/plugins/smooth-scrollbar.min.js}"></script>
  <script th:src="@{/assets/js/material-dashboard.min.js?v=3.2.0}"></script>
</body>

</html>